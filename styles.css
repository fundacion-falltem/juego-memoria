/* ======================================================
   FALLTEM — Memoria (parejas) — tema unificado v2.3.1
   ====================================================== */

/* ===== Tokens ===== */
:root{
  color-scheme: light dark;
  --fs-base: clamp(18px, 1.2vw + 14px, 22px);
  --space: clamp(12px, 1vw + 8px, 18px);
  --font: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  --bg:#f8fbf4; --fg:#1b1b1b; --muted:#50380b;
  --card:#ffffff; --border:#e5e7eb;
  --opt-bg:#ffffff; --opt-border:#dfe3e7;

  --accent:#99cd68;     /* verde */
  --accent-2:#5fcbe0;   /* celeste */

  --btn-primary-bg: var(--accent);  --btn-primary-fg:#08340f;
  --btn-sec-bg:     var(--accent-2);--btn-sec-fg:#072a32;

  --focus-color: var(--accent-2);
}

[data-theme="dark"]{
  --bg:#0b0b0b; --fg:#f5f5f5; --muted:#cfcfcf;
  --card:#171717; --border:#2a2a2a;
  --opt-bg:#1a1a1a; --opt-border:#2b2b2b;

  --btn-primary-bg: var(--accent);  --btn-primary-fg:#0a0a0a;
  --btn-sec-bg:     var(--accent-2);--btn-sec-fg:#0a0a0a;
}

/* ===== Base ===== */
*{ box-sizing: border-box }
html,body{ height:100% }
html{ -webkit-text-size-adjust:100%; text-size-adjust:100% }
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:var(--font); font-size:var(--fs-base); line-height:1.7; letter-spacing:.15px;
  padding-bottom: calc(env(safe-area-inset-bottom, 0) + var(--space));
  -webkit-tap-highlight-color: transparent;
}

.wrap{
  max-width: 1100px;
  width: min(1100px, calc(100% - 2*var(--space)));
  margin: 0 auto; padding: var(--space);
}

.header h1{
  font-size: clamp(1.9rem, 1.7vw + 1rem, 2.4rem);
  margin:.5rem 0; font-weight:900
}
.intro{ margin:0 0 var(--space) }

/* ===== Controles ===== */
.controles{
  display:grid; gap:12px; align-items:end;
  grid-template-columns: 1fr 1fr;
  grid-template-areas:
    "tam dif"
    "start start";
  margin-bottom: var(--space);
}
.control{ display:grid; gap:.5rem }
.control--tam{ grid-area: tam }
.control--dif{ grid-area: dif }
.control--start{ grid-area: start }

label{ display:block; font-weight:800; opacity:.98 }
select{
  appearance:none; background:var(--card); color:var(--fg); border:1px solid var(--border);
  padding:.85rem 1rem; border-radius:.8rem; width:100%; font-size:1.05rem;
  background-image:url("data:image/svg+xml;utf8,<svg fill='currentColor' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path d='M5.5 7l4.5 5 4.5-5z'/></svg>");
  background-repeat:no-repeat; background-position:right 1rem center; background-size:1rem; padding-right:2.4rem;
}
select:focus-visible{ outline:3px solid var(--focus-color); outline-offset:3px; border-color:var(--focus-color) }

.btn{
  border:0; border-radius:16px; cursor:pointer; font-weight:800;
  padding:1rem 1.2rem; min-height:52px; font-size:1.05rem;
  transition: transform .08s ease, filter .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}
.btn:hover{ filter:brightness(1.04); transform: translateY(-1px) }
.btn:focus-visible{ outline:3px solid var(--focus-color); outline-offset:3px }
.btn.principal{ background:var(--btn-primary-bg); color:var(--btn-primary-fg) }
.btn.secundario{ background:var(--btn-sec-bg);  color:var(--btn-sec-fg) }



/* Colocar y ensanchar “Comenzar” debajo de los selects */
.control--start .btn{
  display:block;
  width:100%;
  max-width:560px;
  margin:.75rem auto 0;
  min-height:58px;
  font-size:1.08rem;
}

/* ===== HUD ===== */
.estado{ margin:.6rem 0 0; font-weight:800 }
.estado span{ font-variant-numeric: tabular-nums }

/* ===== Tablero ===== */
.tablero{
  margin-top: calc(var(--space) * .5);
  display:grid; gap: 14px;
  grid-template-columns: repeat(4, 1fr);
}
@media (min-width: 920px){ .tablero{ grid-template-columns: repeat(6, 1fr) } }

/* Carta (tapada por defecto) */
.card{
  position:relative; min-height:110px;
  background:var(--opt-bg); border:2px solid var(--opt-border); border-radius:14px;
  display:grid; place-items:center; cursor:pointer;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
  transition: filter .15s ease, transform .08s ease, border-color .15s ease;
}
.card:hover{ filter:brightness(1.03) }
.card:focus-visible{ outline:3px solid var(--focus-color); outline-offset:3px }

.card .emoji{
  font-size: clamp(28px, 6vw, 40px); line-height:1;
  opacity:0; transition: opacity .12s ease;
}
.card.is-flipped .emoji,
.card.is-matched .emoji{ opacity:1 }

.card.is-matched{
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(153,205,104,.35);
  cursor: default;
}

/* ===== FABs (mismo estilo que otros juegos) ===== */
.fab-stack{
  position:fixed;
  right:max(12px, env(safe-area-inset-right,0));
  top:max(12px, env(safe-area-inset-top,0));
  display:grid; gap:12px; z-index:20;
}
.fab{
  width:64px; height:64px; border-radius:50%; border:0; cursor:pointer;
  display:grid; place-items:center; font-weight:900; font-size:1.35rem;
  box-shadow: 0 16px 40px rgba(0,0,0,.20), 0 2px 8px rgba(0,0,0,.10);
  transition: transform .08s ease, filter .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}
.fab:hover{ transform:translateY(-1px); filter:brightness(1.04) }
.fab:focus-visible{ outline:3px solid var(--focus-color); outline-offset:3px }

/* Colores */
/* Light: ? celeste; tema (luna) oscuro */
[data-theme="light"] .fab-help  { background: var(--accent-2); color:#072a32; }
[data-theme="light"] .fab-theme { background: #1f2733; color:#fff; }

/* Dark: ambos celestes (ícono ☀️ lo maneja el JS) */
[data-theme="dark"] .fab-help,
[data-theme="dark"] .fab-theme { background: var(--accent-2); color:#0a0a0a; }

/* ===== Modal ===== */
.modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); z-index:30 }
.modal[aria-hidden="false"]{ display:block }
.modal-card{
  max-width:min(820px, 100% - 2*var(--space));
  max-height:min(86vh, 100% - 2*var(--space));
  margin:5vh auto; background:var(--card); color:var(--fg);
  padding:var(--space); border-radius:16px; border:1px solid var(--border);
  box-shadow:0 4px 14px rgba(0,0,0,.15);
  overflow:auto;
}
.mt0{ margin-top:0 }
.modal-actions{ display:flex; gap:10px; justify-content:flex-end }

/* ===== Skip link ===== */
.skip{ position:absolute; left:-9999px; top:auto }
.skip:focus{
  left:12px; top:12px; background:var(--btn-primary-bg); color:var(--btn-primary-fg);
  padding:8px 10px; border-radius:8px; z-index:1000;
}

/* ===== Tamaño muy grande ===== */
html.muy-grande{ font-size:125% }
html.muy-grande body{ --fs-base: clamp(20px, 1.3vw + 16px, 24px) }

/* ===== Reduce motion ===== */
@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; scroll-behavior:auto !important }
}

/* --- FABs coherentes entre sí --- */

/* Modo CLARO: ambos oscuros */
[data-theme="light"] .fab--help,
[data-theme="light"] .fab--theme {
  background: #1f2733;
  color: #e8f1f5; /* contraste cómodo */
}

/* Modo OSCURO: ambos celestes */
[data-theme="dark"] .fab--help,
[data-theme="dark"] .fab--theme {
  background: var(--accent-2);
  color: #072a32;
}



/* ===== Footer ===== */
.mini-credit{
  margin-top:.9rem; padding:.6rem 0; border-top:1px solid var(--border);
  font-size:.85em; line-height:1.35; color:var(--muted);
}
.mini-credit a{ color:inherit; font-weight:700; text-decoration:underline }
.mini-label{ font-weight:900; color:var(--fg) }
